
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Materialize - Compiled and minified CSS-->
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.95.3/css/materialize.min.css"
    />
    <!-- Font Awesome Icon - CSS-->
    <link
      rel="stylesheet"
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"
    />
    <title>Moving my blog to Eleventy, Part 1: Installing Node with NVM</title>
    <!-- Open Graph-->
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Moving my blog to Eleventy, Part 1: Installing Node with NVM" />
    <meta property="og:description" content="Follow along as I fail to get step 1 of the Eleventy docs working, and instead spend an entire night installing Node." />
    <meta property="og:url" content="andrewborstein.com" />
    <meta property="og:site_name" content="Moving my blog to Eleventy, Part 1: Installing Node with NVM" />
    <meta property="article:publisher" content="andrewborstein.com" />
    <meta property="og:image" content="" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@andrewarei" />
    <meta name="twitter:title" content="Moving my blog to Eleventy, Part 1: Installing Node with NVM" />
    <meta name="twitter:description" content="Follow along as I fail to get step 1 of the Eleventy docs working, and instead spend an entire night installing Node." />
    <meta name="twitter:url" content="andrewborstein.com" />
    <meta name="author" content="Andrew Borstein" />
    <meta name="description" content="Follow along as I fail to get step 1 of the Eleventy docs working, and instead spend an entire night installing Node." />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/assets/img/favicon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/assets/img/favicon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/assets/img/favicon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/assets/img/favicon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/assets/img/favicon/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/assets/img/favicon/apple-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/assets/img/favicon/apple-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/assets/img/favicon/apple-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/img/favicon/apple-icon-180x180.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/assets/img/favicon/android-icon-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/img/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/assets/img/favicon/favicon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/img/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/assets/img/favicon/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      content="/assets/img/favicon/ms-icon-144x144.png"
    />
    <meta name="theme-color" content="#ffffff" />
    <!--if lt IE 9script(src='//html5shim.googlecode.com/svn/trunk/html5.js')
	-->
    <meta name="robots" content="index, follow" />
  </head>
  <body>
    
<!-- Custom Styles-->
<style>
  /* Blog Styles */
  body {
    color: #333;
    font-size: 16px;
  }
  a {
    color: #009688;
  }
  blockquote {
    border-left: 5px solid #795548;
    color: #795548;
    font-size: 125%;
    font-weight: 400;
    margin: 20px 0;
    padding-left: 1.5rem;
  }
  blockquote * {
    font-size: inherit;
    line-height: inherit;
  }
  .text-center {
    text-align: center;
  }
  nav {
    background: white;
    box-shadow: none;
    height: 0;
  }
  nav i {
    padding: 0 15px;
    position: relative;
    top: 5px;
  }
  main {
    background: url(/assets/img/bg.png) repeat;
  }
  article {
    max-width: 85ch;
    margin: 0 auto;
    padding: 2rem;
    font-size: 100%;
    line-height: 1.6;
  }
  img {
    max-width: 100%;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.15);
  }
  @media (min-width: 30rem) {
    article {
      font-size: 120%;
    }
  }
  h1 {
    font-size: 3rem;
    font-weight: 300;
    letter-spacing: 0.2rem;
    line-height: 1;
    margin-bottom: 1rem;
    text-transform: uppercase;
  }
  @media (min-width: 30rem) {
    h1 {
      font-size: 5rem;
    }
  }
  h2 {
    font-size: 3rem;
    line-height: 1.3;
  }
  h3 {
    font-size: 2rem;
    line-height: 1.3;
  }
  hr {
    margin: 4rem 0;
  }
  ul {
    padding-left: 1em;
  }
  ul li {
    list-style-type: initial;
  }
  p a {
    text-decoration: underline;
  }
  dl {
    color: #666;
    margin-bottom: 3rem;
    margin-top: 0.5rem;
  }
  dd {
    display: inline-block;
    font-weight: 500;
    margin-left: 0;
  }
  dt {
    display: inline-block;
    margin-left: 0.5rem;
  }
  .back-to-index {
    align-content: center;
    display: flex;
    font-size: 1rem;
    letter-spacing: 0.25rem;
    padding: 2rem 3rem;
    text-transform: uppercase;
  }
  .back-to-index i {
    margin-right: 0.5rem;
  }
  dl {
    margin-top: 0.5rem;
  }
  dd {
    display: inline-block;
    font-weight: 500;
    margin-left: 0;
  }
  dt {
    display: inline-block;
    margin-left: 0.5rem;
  }
  pre {
    background-color: #222;
    color: #ccc;
    font-size: 1rem;
    padding: 2rem;
  }
  p code {
    background: #ddd;
    border: 0.25rem solid #ddd;
    border-left-width: 0.5rem;
    border-right-width: 0.5rem;
    color: #eb5757;
    font-size: 0.9em;
  }
</style>
<a class="back-to-index" href="/#blog">
  <i class="mdi-hardware-keyboard-arrow-left"></i>
  Back to blog index
</a>
<!-- Main Content-->
<main>
  <article>
    <h1>Moving my blog to Eleventy, Part 1: Installing Node with NVM</h1>
<h2>tl:dr;</h2>
<p>Apparently writing <a href="/blog/hello-world-and-why-im-blogging">my first blog post</a> wasn't enough to kick my butt into high blogging gear. Two posts per year isn't quite the clip I was hoping for! So my new plan is to make it so easy to write, publish, and manage content that I have no excuse but to do it more often. Follow along as I try to get <a href="https://www.11ty.dev/#quick-start">step 1 of the Eleventy docs</a> working, but instead spend an entire night installing <a href="https://nodejs.org/en/">Node</a>.</p>
<p>View all posts in this Eleventy series:</p>
<ul>
<li><a href="/blog/moving-my-blog-to-eleventy-part-1/">Part 1: Installing Node with NVM</a></li>
<li><a href="/blog/moving-my-blog-to-eleventy-part-2/">Part 2: Getting Started</a></li>
</ul>
<hr>
<h2>Preface: Bring on the hot mess</h2>
<p>Truth be told, I am genuinely apprehensive about updating the tech stack of my portfolio site. I've been burned before. <a href="https://github.com/andrewborstein/portfolio/commit/58cdef4c1388d9b7a7f64339db750dca5a60f928#diff-595bf3fa2348192244b0319be33066b8">An earlier version of this site</a> was built in 2015 using <a href="http://jade-lang.com/">Jade</a> for templating and <a href="https://gruntjs.com/">Grunt</a> for compiling the assets. At some point the compilation totally broke and I didn't feel like investing the time to figure out why. The same thing happened with <a href="http://savedbythetext.herokuapp.com/">a small Rails app that I built</a> around the same time.Â I left it alone and one day POOF it stopped working. It was easier to rebuild the entire thing from scratch than to update all the dependencies and libraries. But even now, completely rebuilt, it's a ticking time bomb. I'm just biding my time until it fails again.</p>
<p>If you're new to web development, let me disabuse you of any misconceptions to the contrary: this is par for the course. The entire web is in a constant state of decay, some parts degrading more quickly than others. If you build something and then simply wait... eventually, it will break. It's just a matter of time! The few things that don't break should be considered exceptions to the rule and can be counted on two hands (kudos, <a href="https://www.spacejam.com/">Space Jam</a>).</p>
<p>But don't misunderstand me! This is not all bad. In fact, it's part of what makes web development so exciting. There are a limitless number of problems to be solved, bugs to be squashed, new toys to try out. To create something that lasts, though, you need to carefully consider the tools and materials you use to build it. I imagine the same is true for any other form of engineering or art. That's why <a href="https://github.com/andrewborstein/portfolio/commit/34dd7c75f4b20954a8b0adb76b099cc95c69efbe">I removed all the JS dependencies</a> in a fit of frustration and defiance 6 months ago. I wanted to get as close to 100% native browser technologies as possible. Just the basics: HTML, CSS, Javascript. Ideally that would include removing all my 3rd party dependencies, and I'm not there yet. Add that to the never ending to-do list of ways to improve the site.</p>
<p>And now, with my tail between my legs, I'm crawling back to the Javascript ecosystem to help me out of a bind. Some tasks are just too thorny (or annoying) for plain ol' HTML, and blogging is one of them. So here I am once again, crossing my fingers and hoping the latest <code>npm install</code> <em>hotness</em> won't reduce my website to a <em>hot</em> <em>mess</em> as soon as I close my laptop for a minute. But I'm choosing to take a different outlook this time around. I want to get my hands dirty. I want stuff to break. I want to experiment with new technologies. Maybe having a project that <em>needs</em> constant maintenance will actually be good for me, assuming I'm willing to commit time to it. So I say bring it on.</p>
<h2>Installing Eleventy</h2>
<p>OK! I'm excited to get started. The <a href="https://www.11ty.dev/#quick-start">Eleventy quick start guide</a> suggests that installation is a 3-line process. Sounds great to me! So I clone <a href="https://github.com/andrewborstein/portfolio">my portfolio repo</a> locally, open the directory in my text editor and attempt step 1, which looks like installing the Eleventy node module globally:</p>
<pre><code class="language-bash">$ npm install -g @11ty/eleventy
</code></pre>
<h2>Just kidding, everything is broken. Debugging time.</h2>
<p>Whyyyyyyy ahh crap, I already got my first failure. Things are going great!</p>
<pre><code class="language-bash">npm WARN deprecated chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.
npm WARN deprecated fsevents@1.2.12: fsevents 1 will break on node v14+. Upgrade to fsevents 2 with massive improvements.
npm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
npm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
npm WARN deprecated core-js@2.6.11: core-js@&lt;3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.
npm WARN checkPermissions Missing write access to /usr/local/lib/node_modules
npm ERR! code EACCES
npm ERR! syscall access
npm ERR! path /usr/local/lib/node_modules
npm ERR! errno -13
npm ERR! Error: EACCES: permission denied, access '/usr/local/lib/node_modules'
npm ERR!  [Error: EACCES: permission denied, access '/usr/local/lib/node_modules'] {
npm ERR!   stack: &quot;Error: EACCES: permission denied, access '/usr/local/lib/node_modules'&quot;,
npm ERR!   errno: -13,
npm ERR!   code: 'EACCES',
npm ERR!   syscall: 'access',
npm ERR!   path: '/usr/local/lib/node_modules'
npm ERR! }
npm ERR! 
npm ERR! The operation was rejected by your operating system.
npm ERR! It is likely you do not have the permissions to access this file as the current user
npm ERR! 
npm ERR! If you believe this might be a permissions issue, please double-check the
npm ERR! permissions of the file and its containing directories, or try running
npm ERR! the command again as root/Administrator.

npm ERR! A complete log of this run can be found in:
npm ERR!     /Users/personal/.npm/_logs/2020-04-22T00_30_06_956Z-debug.log
</code></pre>
<p>I'm faced with my first quandary. This is exactly the kind of nonsense I was hoping to avoid. Do I dive in and fix solve this or reach for another tool? Is this a harbinger of what's to come? Perhaps it's future me, warning of the dangers that lie ahead.</p>
<p>Well, no use dwelling on it. Good developers solve problems. I'd like to be a good developer. But good developers also sidestep problems that don't need solving... The best, most resilient, future-proof code is the code you never write. Still, the whole point of this exercise is putting in the work now so I can make blogging easier later. I guess we're gonna dive in...</p>
<h2>Installing Node on a second mac user account</h2>
<p>I googled the above error and it looks like I may have a quick resolution (<a href="https://flaviocopes.com/npm-fix-missing-write-access-error/">Thanks, Flavio!</a>). OK, actually that leads was a red herring. Following the steps outlined in the post didn't fix the error. There's a note in there that sticks out to me:</p>
<blockquote>
<p>This tip applies to single user systems. On a multi-user system, you might want to create a dedicated directory for npm modules, see <a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a>.</p>
</blockquote>
<p>I had a hunch this was related to being a multi-user system. I installed a separate user account on my work laptop for all of my non-work projects, and that's where I'm working now. I haven't gotten very deep into personal projects on this laptop. It's my work work horse (puns!), and I probably wouldn't have encountered this issue at all had I been working on my primary user account. But now I want to fix it, and that NPM has some advice for me in the article Flavio linked to.</p>
<h2>Installing a Node version manager (NVM)</h2>
<p>OK, super, I'm off to install a Node version manager so that I can easily install, well, any version of Node. Or install multiple versions of node and toggle between them on different projects, all from a few simple Terminal commands.</p>
<p>OH, wow, I was literally looking at this <a href="https://github.com/nvm-sh/nvm">NVM documentation</a> two weeks ago! I spent a few hours trying to install it for work only to realize one of my local bash aliases was overwriting a command included in the NVM the install script. I was annoyed then, but it makes sense that the docs don't mention anything about the error I'm seeing â€” I might be the only person to ever encounter it, because of my very specific setup.</p>
<p>When I run step 1 of their install instructions, this is what I see:</p>
<pre><code class="language-bash">$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 13527  100 13527    0     0  71286      0 --:--:-- --:--:-- --:--:-- 71194
(23) Failed writing body
</code></pre>
<p>Whaddya know I get the same error now that I did the first time! Luckily this one is fresh in my mind. Apparently <code>.bash_profile</code> files don't automatically sync between different mac user accounts, otherwise the fix I found 2 weeks ago would be present here, too.</p>
<p>I still have a <a href="https://linuxize.com/post/how-to-create-bash-aliases/">bash alias</a> called <code>bash</code> (maybe you can already imagine why that's a terrible name), which clearly needs to change as it's competing with the <code>bash</code> command in the NVM install script. We've both defined a command with the name <code>bash</code>, but the NVM script can only reference one of them. In this case, it will call either the first or last one defined. I want their script to win, though, so I change my script from</p>
<pre><code class="language-bash"># Open the bash profile, e.g. $ bash
alias bash='open ~/.bash_profile'
</code></pre>
<p>to</p>
<pre><code class="language-bash"># Open the bash profile, e.g. $ open_bash
alias open_bash='open ~/.bash_profile'
</code></pre>
<p>This is one of the fun (torturous?) parts about being a web developer. Bugs happen. They are 1000% unavoidable. The systems we were work in are not closed, or static â€” they are ever-evolving with more and more interdependencies. And more and more flawed humans working in them. You can't predict every edge case, like the dummy at home that happens to make a bash alias called, ahem, <code>bash</code>. But you can at least do your part to share your hard earned knowledge with other <s>dummies</s> folks that might encounter the same problem.</p>
<p>After changing the name of my alias, the NVM installation command failed one more time, just for fun-sies, so I restarted my Terminal and <em>phew</em> it ran fine.</p>
<pre><code class="language-bash">$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
# ... successful installation ðŸŽ‰

$ command -v nvm
nvm
</code></pre>
<p>The above means that my computer knows how to respond to a command named <code>nvm</code> . In other words, nvm works now. Thank jeebus.</p>
<h2>Installing a specific version of Node with NVM</h2>
<p>Looks like I've got one more step here, which is installing a version of Node using my handy dandy new version manager. I opt for the latest version, which is the default, since I have no reason to believe I need a specific, older version to work with Eleventy.</p>
<pre><code class="language-bash">$ nvm install node
Downloading and installing node v14.0.0...
Downloading https://nodejs.org/dist/v14.0.0/node-v14.0.0-darwin-x64.tar.gz...
######################################################################## 100.0%
Computing checksum with shasum -a 256
Checksums matched!
Now using node v14.0.0 (npm v6.14.4)
Creating default alias: default -&gt; node (-&gt; v14.0.0)
</code></pre>
<p>Whew! Node is officially installed, which I verify just to be safe.</p>
<pre><code class="language-bash">$ node -v
v14.0.0
</code></pre>
<h2>Final thoughts: Â¯\<em>(ãƒ„)</em>/Â¯</h2>
<p>What an epic detour the start of a my blogging project. Aside from getting some hopefully useful content for this post, I didn't get to work on a single piece of the actual blog infrastructure. Even the best-laid plans sometimes go wrong. And in web development we can comfortably swap &quot;sometimes&quot; with &quot;always.&quot;</p>
<p>During this process I am <em>constantly</em> reminded about the fragility of what I'm building. What if I want to leave this site alone and revisit in a year, and the latest stable and secure version of Node is now v15 instead of v14? Will everything be broken? Will there be urgent security vulnerabilities? What sort of Herculean effort will be required just to work on my simple blog site if I <em>gasp</em> get a new laptop?? For now, I'm filing those away as &quot;future me&quot; problems. Experimentation! Learning! <code>wind.push(caution)</code>. Ugh, that's corny.</p>
<p>Ok back to the main event, Eleventy. What could go wrong? I'm as curious as you are. Come back sometime in the nearish future (hopefully next week) â€”Â for Part 2 of this series â€” to find out.</p>

    <hr>
    <p>
      <a href="mailto:andrew@andrewborstein.com">Email me</a> anytime to offer
      feedback, ask questions, or just say hello ðŸ‘‹.
    </p>
  </article>
</main>


    <!--
      Google Analytics
      -------------------------------------------------
      If you want to enable your own account, assign analyticsId to your
      google analytics id, which should be the numbers following "UA-", e.g.
      var analyticsId = "12345678-9"
    -->
    <script>
      var analyticsId;

      // If analytics id has been manually defined
      if (analyticsId) {
        // Initialize GA with local var
        initGoogleAnalytics(analyticsId);
      } else {
        // Initialize GA with Netlify env var available via lamba function
        fetch("/.netlify/functions/env_vars")
          .then(getEnvVar)
          .then(initGoogleAnalytics)
          .catch(handleError);
      }

      // -------------------------------------------------
      // Helper Functions
      // --------------------------------------------------

      function handleError(error) {
        console.log("error", error);
      }

      function getEnvVar(response) {
        // If the request was successful
        if (response.ok) {
          // Return the response text
          return response.text();
        } else {
          // Return a rejected Promise object, triggering the .catch()
          return Promise.reject(response);
        }
      }

      // Set Up Google Analytics
      function initGoogleAnalytics(analyticsId) {
        if (analyticsId) {
          // Inject the Google Analytics Tag Manager script into the DOM
          analyticsUrl =
            "https://www.googletagmanager.com/gtag/js?id=UA-" + analyticsId;
          var ref = document.getElementsByTagName("script")[0];
          var script = document.createElement("script");
          script.src = analyticsUrl;
          ref.parentNode.insertBefore(script, ref);

          // Initialize Google Analytics
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
          gtag("config", "UA-" + analyticsId);
        }
      }
    </script>
    <!-- jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- Materialize - Compiled and minified JavaScript-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.95.3/js/materialize.min.js"></script>
    <script>
      // Materialize - Initializers
      $(document).ready(function () {
        $(".scrollspy").scrollSpy();
        // Initialize collapse button
        $(".button-collapse").sideNav({
          menuWidth: 190, // Default is 240
          edge: "left", // Choose the horizontal origin
          closeOnClick: true, // Closes side-nav on <a> clicks, useful for Angular/Meteor
        });
      });
    </script>

    <!-- prettier-ignore -->
    <small hidden>
           ___                       ___           ___                    ___                                     ___
          /\  \                     /\__\         /\  \                  /\__\                      ___          /\__\
          \:\  \       ___         /:/ _/_        \:\  \                /:/ _/_       ___          /\  \        /:/ _/_
           \:\  \     /\__\       /:/ /\  \        \:\  \              /:/ /\__\     /\__\         \:\  \      /:/ /\__\
       ___ /::\  \   /:/__/      /:/ /::\  \   ___ /::\  \            /:/ /:/  /    /:/__/          \:\  \    /:/ /:/ _/_
      /\  /:/\:\__\ /::\  \     /:/__\/\:\__\ /\  /:/\:\__\          /:/_/:/  /    /::\  \      ___  \:\__\  /:/_/:/ /\__\
      \:\/:/  \/__/ \/\:\  \__  \:\  \ /:/  / \:\/:/  \/__/          \:\/:/  /     \/\:\  \__  /\  \ |:|  |  \:\/:/ /:/  /
       \::/__/       ~~\:\/\__\  \:\  /:/  /   \::/__/                \::/__/       ~~\:\/\__\ \:\  \|:|  |   \::/_/:/  /
        \:\  \          \::/  /   \:\/:/  /     \:\  \                 \:\  \          \::/  /  \:\__|:|__|    \:\/:/  /
         \:\__\         /:/  /     \::/  /       \:\__\                 \:\__\         /:/  /    \::::/__/      \::/  /
          \/__/         \/__/       \/__/         \/__/                  \/__/         \/__/      ~~~~           \/__/
    </small>
  </body>
</html>
